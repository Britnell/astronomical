---
interface FormField {
  id: string;
  // label: string;
  type: "text" | "email" | "number" | "password" | "date";
  required: boolean;
  minLength?: number;
  maxLength?: number;
  pattern?: string;
  title?: string;
}
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Form</title>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
  </head>
  <body>
    <header class="flex justify-between">
      <span>Forms</span>
      <a href="/">back</a>
    </header>
    <style>
      /*  */
      .field .error {
        display: none;
        color: darkred;
      }
      .field input:user-invalid ~ .error {
        display: block;
      }
    </style>
    <main class="max-w-[400px] mx-auto">
      <h1>Ask - what can forms do for you?</h1>
      <form id="theform">
        <div class="field">
          <label for="name"> Name * </label>
          <input
            type="text"
            id="name"
            name="name"
            class="block border-2 rounded px-2 py-1"
            required
          />
          <span class="error">Please enter your name</span>
        </div>

        <div class="field">
          <label for="phone"> Mobile phone * </label>
          <input
            type="text"
            id="phone"
            name="phone"
            class="block border-2 rounded px-2 py-1"
            minlength="11"
            required
          />
          <span class="error">Please enter your mobile Phone no</span>
        </div>

        <div class="field">
          <label for="code"> Code * </label>
          <input
            type="text"
            id="code"
            name="code"
            class="block border-2 rounded px-2 py-1"
            minlength="6"
            maxlength="6"
            title="Please enter your 6 Digit code"
            required
          />
          <span class="error">Please enter your 6 Digit code</span>
        </div>

        <div class="field">
          <label for="postcode"> Postcode * </label>
          <input
            type="text"
            id="postcode"
            name="postcode"
            pattern="[A-Za-z]{2}[0-9]{2,3}[A-Za-z]{2}"
            class="block border-2 rounded px-2 py-1"
            title="UK postcode"
            required
          />
          <span class="error">Please enter a valid UK postcode</span>
        </div>

        <div class="field">
          <label for="comment"> Comments </label>
          <input
            type="text"
            id="comment"
            name="comment"
            class="block border-2 rounded px-2 py-1"
          />
          <!-- <span class="error">Please enter a valid UK postcode</span> -->
        </div>

        <div>
          <button type="submit" class="px-2 py-1 border-2">Submit</button>
        </div>
      </form>
    </main>
    <script>
      // @ts-ignore
      window["theform"].addEventListener("submit", (ev) => {
        ev.preventDefault();
        const f = new FormData(ev.target);
        alert(JSON.stringify([...f.entries()]));
      });
    </script>

    <!-- <section>
      <form>
        <label for="code-input">Enter 6-digit code:</label>
        <input
          id="code-input"
          type="text"
          pattern="\d{6}"
          minlength="6"
          required
        />
        <span id="error-message"></span>
        <button type="submit">submit</button>
      </form>

      <script>
        document
          .getElementById("code-input")
          .addEventListener("input", function (e) {
            var errorMessage = document.getElementById("error-message");
            console.log(e.target.value, e.target.validity);

            if (e.target.validity.patternMismatch) {
              e.target.setCustomValidity("Please enter a 6-digit code");
              errorMessage.textContent = "Please enter a 6-digit code";
            } else {
              e.target.setCustomValidity("");
              errorMessage.textContent = "";
            }
          });
      </script>
    </section> -->
  </body>
</html>
